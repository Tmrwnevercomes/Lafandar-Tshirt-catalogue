<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T-Shirt Catalog</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
  </style>
</head>
<body class="bg-gray-100">
  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold text-center mb-6">Our T-Shirt Designs</h1>
    <div id="catalog" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <script>
    // ðŸ”¹ Firebase Config (same as in admin.html)
    const firebaseConfig = {
  apiKey: "AIzaSyAuO5iyXCHYZS9nS2BViu-259sb2CUSZjo",
  authDomain: "tshirt-catalog-v2.firebaseapp.com",
  projectId: "tshirt-catalog-v2",
  storageBucket: "tshirt-catalog-v2.firebasestorage.app",
  messagingSenderId: "428518895959",
  appId: "1:428518895959:web:8e1fccd4d6f1e2c8b00e12"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const catalog = document.getElementById('catalog');

    // ðŸ”¹ Load Products
    db.collection('products').onSnapshot(snapshot => {
      catalog.innerHTML = '';
      if (snapshot.empty) {
        catalog.innerHTML = `<p class="text-center text-gray-500 col-span-full">No products available.</p>`;
        return;
      }

      snapshot.forEach(doc => {
        const product = doc.data();
        const el = document.createElement('div');
        el.className = "bg-white shadow rounded-lg p-4 hover:shadow-lg transition";

        el.innerHTML = `
          <img src="${product.imageUrl}" alt="${product.name}" 
               class="w-full h-48 object-cover rounded mb-3"
               onerror="this.onerror=null;this.src='https://placehold.co/300x200?text=No+Image';">
          <h2 class="text-lg font-bold">${product.name}</h2>
          <p class="text-sm text-gray-500 mt-1">Sizes: ${(product.sizes || []).join(", ")}</p>
          <p class="text-sm text-gray-500">Colors: ${(product.colors || []).join(", ")}</p>
          <p class="text-sm font-medium mt-2">Stock: ${product.stock ?? 0}</p>
          ${
            (product.stock ?? 0) > 0 
              ? `<button class="bg-indigo-600 text-white px-4 py-2 rounded mt-3 w-full">Buy Now</button>` 
              : `<span class="text-red-500 font-bold mt-3 block text-center">Out of Stock</span>`
          }
        `;

        catalog.appendChild(el);
      });
    });
  </script>
</body>
</html>
